<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Semaforo Inteligente</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Serif:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
</head>

<body>
    <main>
        <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="img/img1.1.webp" class="d-block" alt="...">
                </div>
                <div class="carousel-item">
                    <img src="img/img1.2.webp" class="d-block" alt="...">
                </div>
                <div class="carousel-item">
                    <img src="img/img1.3.webp" class="d-block" alt="...">
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
            </button>
        </div>
    </main>


    <!-- Barra de navegación -->
    <nav>
        <div class="logo"><img src="img/logoo (1).ico" alt></div>
        <ul class="nav-links">
            <li><a href="#about">Nosotros</a></li>
            <li><a href="#services">Servicios</a></li>
            <li><a href="#reviews">Reseñas</a></li>
            <li><a href="#socials">Redes Sociales</a></li>
            <li><a href="#" onclick="showLogin()">Iniciar Sesión</a></li>
            <li><a href="#" onclick="showRegister()">Contacto</a></li>
        </ul>
    </nav>

    <!-- Banner principal -->
    <section class="banner">
        <h1>Semaforo Inteligente</h1>
        <p>Explora nuestros servicios</p>
        <button onclick="mostrarMasInformacion()">Ver más
                informacion</button>
    </section>

    <!-- Sección de 'Nosotros' -->
    <section id="about" class="about">
        <h2>Sobre Nosotros</h2>
        <p>Nuestro proyecto consiste en diseñar un semáforo inteligente que incremente la seguridad de los estudiantes de primaria de la Institución Educativa República de Uruguay, ubicada en la comuna 5 de Medellín. Utilizando sensores y microcontroladores,
            se busca que el semáforo se active de forma automática al detectar estudiantes esperando para cruzar, regulando así el tráfico de manera segura.</p>
    </section>

    <!-- Sección de Servicios  -->
    <section id="services" class="services">
        <h2 class="text-center mb-4">Nuestros Servicios</h2>

        <div class="container">
            <div class="row g-4">
                <!-- Tarjeta 1 -->
                <div class="col-md-12">
                    <div class="card shadow-sm">
                        <div class="row g-0 align-items-center">
                            <div class="col-md-4 text-center">
                                <img src="img/img1.1.webp" class="img-fluid rounded-start" alt="Seguridad">
                            </div>
                            <div class="col-md-8">
                                <div class="card-body">
                                    <h5 class="card-title">Mejorar la Seguridad Vial</h5>
                                    <p class="card-text">Implementar un sistema que garantice la seguridad de los estudiantes de primaria al cruzar calles con alto flujo vehicular.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tarjeta 2 -->
                <div class="col-md-12">
                    <div class="card shadow-sm">
                        <div class="row g-0 align-items-center">
                            <div class="col-md-4 text-center">
                                <img src="img/img1.2.webp" class="img-fluid rounded-start" alt="Evitar Accidentes">
                            </div>
                            <div class="col-md-8">
                                <div class="card-body">
                                    <h5 class="card-title">Reducir Accidentes de Tránsito</h5>
                                    <p class="card-text">Disminuir la incidencia de accidentes viales en la Institución Educativa República de Uruguay.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tarjeta 3 -->
                <div class="col-md-12">
                    <div class="card shadow-sm">
                        <div class="row g-0 align-items-center">
                            <div class="col-md-4 text-center">
                                <img src="img/img1.3.webp" class="img-fluid rounded-start" alt="Educación Vial">
                            </div>
                            <div class="col-md-8">
                                <div class="card-body">
                                    <h5 class="card-title">Fomentar la Educación Vial</h5>
                                    <p class="card-text">Promover la conciencia y educación vial entre los estudiantes, para que comprendan la importancia de la seguridad al cruzar calles.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>




    <!-- Sección de Reseñas de Clientes -->
    <section id="reviews" class="reviews">
        <div id="contenedorResenas"></div>
    </section>


    <!-- Redes Sociales -->
    <section id="socials" class="socials">
        <h2>Conéctate con Nosotros</h2>
        <div class="social-icons">
            <a href="https://www.facebook.com/profile.php?id=61578907441243" target="_blank">
                <i class="fab fa-facebook-f"></i>
            </a>
            <a href="https://www.instagram.com/semaforointeligente1/
            " target="_blank">
                <i class="fab fa-instagram"></i>
            </a>
            <a href="https://x.com/SemaforoIn1" target="_blank">
                <i class="fab fa-twitter"></i>
            </a>
        </div>
    </section>

    <!-- Formulario de Registro -->
    <div id="registerForm" class="modal" style="display: none;">
        <h2>Contacto</h2>
        <form id="loginresena">

            <label for="registerNombre">Nombre:</label>
            <input type="text" id="registerNombre">

            <label for="registerDescripcion">Descripción:</label>
            <textarea id="registerDescripcion" required></textarea>

            <button type="submit">Enviar</button>
            <button type="button" onclick="closeModal()">Cerrar</button>
            <div id="messageDiv"></div>
        </form>
    </div>

    <!-- Formulario de Inicio de Sesión -->
    <div id="loginForm" class="modal" style="display: none;">
        <h2>Iniciar Sesión</h2>
        <form id="sesionForm">
            <label for="loginEmail">Correo Electrónico:</label>
            <input type="text" id="loginEmail" required>
            <label for="loginPassword">Contraseña:</label>
            <input type="password" id="loginPassword" required>
            <button type="submit">Iniciar Sesión</button>
            <button type="button" onclick="closeModal()">Cerrar</button>
        </form>
        <p id="mensaje"></p>

    </div>

    <footer>
        <p>&copy; Gracias por visitarnos.</p>
    </footer>

    <!-- Código JavaScript -->
    <script>
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <!-- Modal de Más Información -->
    <div id="infoModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="closeInfoModal()">&times;</span>
            <h2 class="modal-title">Información Adicional</h2>
            <div class="modal-body">
                <p>
                    Esta página ha sido creada con el propósito de concientizar sobre la importancia de la seguridad vial en zonas escolares. Nuestro semáforo inteligente busca proteger a los estudiantes mediante un sistema automatizado y eficiente.
                </p>
                <p>
                    El proyecto fue desarrollado por estudiantes comprometidos con la innovación y la seguridad, utilizando tecnologías como sensores, microcontroladores y algoritmos de detección de presencia.
                </p>
                <p>
                    ¡Gracias por visitar nuestra página!
                </p>
            </div>
        </div>
    </div>

    <!-- ...otros scripts ya incluidos -->
    <script>
        function mostrarMasInformacion() {
            document.getElementById('infoModal').style.display = 'flex';
        }

        function closeInfoModal() {
            document.getElementById('infoModal').style.display = 'none';
        }
        document.getElementById('sesionForm').addEventListener("submit", async(e) => {
                e.preventDefault();
                //aca logica para inicio
                const username = document.getElementById("loginEmail").value;
                const password = document.getElementById("loginPassword").value;


                try {
                    const res = await fetch("http://localhost/SEMAFOROMCM.CODE/SemaforoInteligente/backend/login.php", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            username,
                            password
                        })
                    });

                    const data = await res.json();
                    document.getElementById("mensaje").innerText = data.message;
                    console.log('hola', data);

                    if (data.success) {
                        console.log(data);

                        document.getElementById("mensaje").style.color = "green";
                        window.location.href = "./paginas/admin.html"
                    } else {
                        document.getElementById("mensaje").style.color = "red";
                    }
                } catch (error) {
                    console.log(error);
                    document.getElementById("mensaje").innerText = "Error de conexión con el servidor.";
                    document.getElementById("mensaje").style.color = "red";
                }
            })
            // Mostrar formulario de registro
        document.getElementById("loginresena").addEventListener("submit", async(e) => {
            e.preventDefault();
            const registerNombre = document.getElementById("registerNombre").value.trim() || "Anónimo";
            const registerDescripcion = document.getElementById("registerDescripcion").value.trim();
            const messageDiv = document.getElementById("messageDiv");

            messageDiv.textContent = "";

            if (!registerDescripcion) {
                messageDiv.textContent = "El contenido de la reseña es obligatorio.";
                return;
            }

            fetch("http://localhost/SEMAFOROMCM.CODE/SemaforoInteligente/backend/resena.php", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        name: registerNombre,
                        content: registerDescripcion
                    })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        messageDiv.textContent = data.error;
                    } else {
                        document.getElementById("registerNombre").value = "";
                        document.getElementById("registerDescripcion").value = "";
                        alert("¡Reseña enviada con éxito!");
                        //cargarResenas();
                    }
                })
                .catch(error => {
                    console.error("Error al enviar reseña:", error);
                    messageDiv.textContent = "Error al conectar con el servidor.";
                });
        });

        function cargarResenas() {
            fetch("http://localhost/reviews/backend/get_reviews.php")
                .then(response => response.json())
                .then(data => {
                    const container = document.getElementById("reviews");
                    container.innerHTML = "";

                    if (!Array.isArray(data) || data.length === 0) {
                        container.innerHTML = "<p>No hay reseñas disponibles.</p>";
                        return;
                    }

                    data.forEach(resena => {
                        const div = document.createElement("div");
                        div.className = "review";
                        div.innerHTML = `
                  <strong>${resena.name}</strong><br>
                  <small>${resena.created_at}</small>
                  <p>${resena.content}</p>
                `;
                        container.appendChild(div);
                    });
                })
                .catch(err => {
                    document.getElementById("resenas").innerHTML = "<p>Error al cargar reseñas.</p>";
                });
        }

        // window.onload = cargarResenas;

        //})

        function showRegister() {
            document.getElementById('registerForm').style.display = 'block';
        }

        // Mostrar formulario de inicio de sesión
        function showLogin() {
            document.getElementById('loginForm').style.display = 'block';
        }

        // Cerrar los formularios de registro e inicio de sesión
        function closeModal() {
            document.getElementById('LoginForm').style.display = 'none';
            document.getElementById('loginForm').style.display = 'none';
        }

        // Función para registrar al usuario
        function register(event) {
            event.preventDefault(); // Evita que la página se recargue al enviar el formulario

            // Obtener valores de los campos de registro
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;

            // Guardar los datos del usuario en localStorage
            localStorage.setItem("loginEmail", email);
            localStorage.setItem("loginPassword", password);

            // Confirmación de registro y cerrar modal
            alert('Registro exitoso. Ahora puedes iniciar sesión.');
            closeModal();
        }

        // Función para iniciar sesión
        function showRegister() {
            document.getElementById('registerForm').style.display = 'block';
        }

        function showLogin() {
            document.getElementById('loginForm').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('registerForm').style.display = 'none';
            document.getElementById('loginForm').style.display = 'none';
        }

        function login(event) {
            event.preventDefault(); // Evita que se recargue

            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            const storedEmail = localStorage.getItem('userEmail');
            const storedPassword = localStorage.getItem('userPassword');

            if (email === 'h@h.com' && password === '123') {
                alert('Inicio de sesión exitoso');

                // Espera 0.5 segundos y redirige
                setTimeout(() => {
                    window.location.href = 'paginas/reviews.html';
                }, 500);

            } else {
                alert('Correo o contraseña incorrectos.');
            }
        }
    </script>
    <script>
        function guardarReseña(id, visible) {
            localStorage.setItem(id, visible);
            alert("Cambio guardado. Recarga la página de inicio para ver el efecto.");
        }
    </script>
    <script>
        function cargarResenas() {
            fetch("http://localhost/SEMAFOROMCM.CODE/SemaforoInteligente/backend/getreviews.php")
                .then(response => response.json())
                .then(data => {
                    const container = document.getElementById("contenedorResenas");
                    container.innerHTML = "";

                    if (!Array.isArray(data) || data.length === 0) {
                        container.innerHTML = "<p>No hay reseñas disponibles.</p>";
                        return;
                    }

                    data.forEach(resena => {
                        const div = document.createElement("div");
                        div.className = "review";
                        div.innerHTML = `
              <strong>${resena.name}</strong><br>
              <small>${resena.created_at}</small>
              <p>${resena.content}</p>
            `;
                        container.appendChild(div);
                    });
                })
                .catch(err => {
                    document.getElementById("resenas").innerHTML = "<p>Error al cargar reseñas.</p>";
                });
        }

        window.onload = cargarResenas;
    </script>

    </script>
    <div id="burbujaReseña" class="burbuja-reseña" style="display: none;"></div>
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            const mostrar = localStorage.getItem('reseña1') === "true";
            const burbuja = document.getElementById("burbujaReseña");

            if (mostrar) {
                burbuja.innerHTML = `
            <strong>Juan Pérez</strong><br>
            <span>“Excelente servicio, me gustó mucho.”</span>
            `;
                burbuja.style.display = "block";
            }
        });
    </script>

</body>

</html>